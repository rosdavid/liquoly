/*!
 * Copyright 2012, Chris Wanstrath
 * Released under the MIT License
 * https://github.com/defunkt/jquery-pjax
 */(function(t){function J(e,r,n){return n=j(r,n),this.on("click.pjax",e,function(a){var i=n;i.container||(i=t.extend({},n),i.container=t(this).attr("data-pjax")),k(a,i)})}function k(e,r,n){n=j(r,n);var a=e.currentTarget,i=t(a);if(a.tagName.toUpperCase()!=="A")throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey)&&!(location.protocol!==a.protocol||location.hostname!==a.hostname)&&!(a.href.indexOf("#")>-1&&q(a)==q(location))&&!e.isDefaultPrevented()){var c={url:a.href,container:i.attr("data-pjax"),target:a},s=t.extend({},c,n),l=t.Event("pjax:click");i.trigger(l,[s]),l.isDefaultPrevented()||(f(s),e.preventDefault(),i.trigger("pjax:clicked",[s]))}}function N(e,r,n){n=j(r,n);var a=e.currentTarget,i=t(a);if(a.tagName.toUpperCase()!=="FORM")throw"$.pjax.submit requires a form element";var c={type:(i.attr("method")||"GET").toUpperCase(),url:i.attr("action"),container:i.attr("data-pjax"),target:a};if(c.type!=="GET"&&window.FormData!==void 0)c.data=new FormData(a),c.processData=!1,c.contentType=!1;else{if(i.find(":file").length)return;c.data=i.serializeArray()}f(t.extend({},c,n)),e.preventDefault()}function f(e){e=t.extend(!0,{},t.ajaxSettings,f.defaults,e),t.isFunction(e.url)&&(e.url=e.url());var r=x(e.url).hash,n=t.type(e.container);if(n!=="string")throw"expected string value for 'container' option; got "+n;var a=e.context=t(e.container);if(!a.length)throw"the container selector '"+e.container+"' did not match anything";e.data||(e.data={}),t.isArray(e.data)?e.data.push({name:"_pjax",value:e.container}):e.data._pjax=e.container;function i(l,o,u){u||(u={}),u.relatedTarget=e.target;var p=t.Event(l,u);return a.trigger(p,o),!p.isDefaultPrevented()}var c;e.beforeSend=function(l,o){if(o.type!=="GET"&&(o.timeout=0),l.setRequestHeader("X-PJAX","true"),l.setRequestHeader("X-PJAX-Container",e.container),!i("pjax:beforeSend",[l,o]))return!1;o.timeout>0&&(c=setTimeout(function(){i("pjax:timeout",[l,e])&&l.abort("timeout")},o.timeout),o.timeout=0);var u=x(o.url);r&&(u.hash=r),e.requestUrl=X(u)},e.complete=function(l,o){c&&clearTimeout(c),i("pjax:complete",[l,o,e]),i("pjax:end",[l,e])},e.error=function(l,o,u){var p=F("",l,e),w=i("pjax:error",[l,o,u,e]);e.type=="GET"&&o!=="abort"&&w&&m(p.url)},e.success=function(l,o,u){var p=f.state,w=typeof t.pjax.defaults.version=="function"?t.pjax.defaults.version():t.pjax.defaults.version,L=u.getResponseHeader("X-PJAX-Version"),d=F(l,u,e),O=x(d.url);if(r&&(O.hash=r,d.url=O.href),w&&L&&w!==L){m(d.url);return}if(!d.contents){m(d.url);return}f.state={id:e.id||U(),url:d.url,title:d.title,container:e.container,fragment:e.fragment,timeout:e.timeout},(e.push||e.replace)&&window.history.replaceState(f.state,d.title,d.url);var Y=t.contains(a,document.activeElement);if(Y)try{document.activeElement.blur()}catch(Z){}d.title&&(document.title=d.title),i("pjax:beforeReplace",[d.contents,e],{state:f.state,previousState:p}),a.html(d.contents);var P=a.find("input[autofocus], textarea[autofocus]").last()[0];P&&document.activeElement!==P&&P.focus(),B(d.scripts);var C=e.scrollTo;if(r){var _=decodeURIComponent(r.slice(1)),I=document.getElementById(_)||document.getElementsByName(_)[0];I&&(C=t(I).offset().top)}typeof C=="number"&&t(window).scrollTop(C),i("pjax:success",[l,o,u,e])},f.state||(f.state={id:U(),url:window.location.href,title:document.title,container:e.container,fragment:e.fragment,timeout:e.timeout},window.history.replaceState(f.state,document.title)),A(f.xhr),f.options=e;var s=f.xhr=t.ajax(e);return s.readyState>0&&(e.push&&!e.replace&&(z(f.state.id,[e.container,D(a)]),window.history.pushState(null,"",e.requestUrl)),i("pjax:start",[s,e]),i("pjax:send",[s,e])),f.xhr}function V(e,r){var n={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return f(t.extend(n,j(e,r)))}function m(e){window.history.replaceState(null,"",f.state.url),window.location.replace(e)}var v=!0,K=window.location.href,g=window.history.state;g&&g.container&&(f.state=g),"state"in window.history&&(v=!1);function R(e){v||A(f.xhr);var r=f.state,n=e.state,a;if(n&&n.container){if(v&&K==n.url)return;if(r){if(r.id===n.id)return;a=r.id<n.id?"forward":"back"}var i=h[n.id]||[],c=i[0]||n.container,s=t(c),l=i[1];if(s.length){r&&Q(a,r.id,[c,D(s)]);var o=t.Event("pjax:popstate",{state:n,direction:a});s.trigger(o);var u={id:n.id,url:n.url,container:c,push:!1,fragment:n.fragment,timeout:n.timeout,scrollTo:!1};if(l){s.trigger("pjax:start",[null,u]),f.state=n,n.title&&(document.title=n.title);var p=t.Event("pjax:beforeReplace",{state:n,previousState:r});s.trigger(p,[l,u]),s.html(l),s.trigger("pjax:end",[null,u])}else f(u);s[0].offsetHeight}else m(location.href)}v=!1}function M(e){var r=t.isFunction(e.url)?e.url():e.url,n=e.type?e.type.toUpperCase():"GET",a=t("<form>",{method:n==="GET"?"GET":"POST",action:r,style:"display:none"});n!=="GET"&&n!=="POST"&&a.append(t("<input>",{type:"hidden",name:"_method",value:n.toLowerCase()}));var i=e.data;if(typeof i=="string")t.each(i.split("&"),function(s,l){var o=l.split("=");a.append(t("<input>",{type:"hidden",name:o[0],value:o[1]}))});else if(t.isArray(i))t.each(i,function(s,l){a.append(t("<input>",{type:"hidden",name:l.name,value:l.value}))});else if(typeof i=="object"){var c;for(c in i)a.append(t("<input>",{type:"hidden",name:c,value:i[c]}))}t(document.body).append(a),a.submit()}function A(e){e&&e.readyState<4&&(e.onreadystatechange=t.noop,e.abort())}function U(){return new Date().getTime()}function D(e){var r=e.clone();return r.find("script").each(function(){this.src||t._data(this,"globalEval",!1)}),r.contents()}function X(e){return e.search=e.search.replace(/([?&])(_pjax|_)=[^&]*/g,"").replace(/^&/,""),e.href.replace(/\?($|#)/,"$1")}function x(e){var r=document.createElement("a");return r.href=e,r}function q(e){return e.href.replace(/#.*/,"")}function j(e,r){return e&&r?(r=t.extend({},r),r.container=e,r):t.isPlainObject(e)?e:{container:e}}function b(e,r){return e.filter(r).add(e.find(r))}function T(e){return t.parseHTML(e,document,!0)}function F(e,r,n){var a={},i=/<html/i.test(e),c=r.getResponseHeader("X-PJAX-URL");a.url=c?X(x(c)):n.requestUrl;var s,l;if(i){l=t(T(e.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]));var o=e.match(/<head[^>]*>([\s\S.]*)<\/head>/i);s=o!=null?t(T(o[0])):l}else s=l=t(T(e));if(l.length===0)return a;if(a.title=b(s,"title").last().text(),n.fragment){var u=l;n.fragment!=="body"&&(u=b(u,n.fragment).first()),u.length&&(a.contents=n.fragment==="body"?u:u.contents(),a.title||(a.title=u.attr("title")||u.data("title")))}else i||(a.contents=l);return a.contents&&(a.contents=a.contents.not(function(){return t(this).is("title")}),a.contents.find("title").remove(),a.scripts=b(a.contents,"script[src]").remove(),a.contents=a.contents.not(a.scripts)),a.title&&(a.title=t.trim(a.title)),a}function B(e){if(e){var r=t("script[src]");e.each(function(){var n=this.src,a=r.filter(function(){return this.src===n});if(!a.length){var i=document.createElement("script"),c=t(this).attr("type");c&&(i.type=c),i.src=t(this).attr("src"),document.head.appendChild(i)}})}}var h={},S=[],y=[];function z(e,r){h[e]=r,y.push(e),E(S,0),E(y,f.defaults.maxCacheLength)}function Q(e,r,n){var a,i;h[r]=n,e==="forward"?(a=y,i=S):(a=S,i=y),a.push(r),r=i.pop(),r&&delete h[r],E(a,f.defaults.maxCacheLength)}function E(e,r){for(;e.length>r;)delete h[e.shift()]}function W(){return t("meta").filter(function(){var e=t(this).attr("http-equiv");return e&&e.toUpperCase()==="X-PJAX-VERSION"}).attr("content")}function G(){t.fn.pjax=J,t.pjax=f,t.pjax.enable=t.noop,t.pjax.disable=H,t.pjax.click=k,t.pjax.submit=N,t.pjax.reload=V,t.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:W},t(window).on("popstate.pjax",R)}function H(){t.fn.pjax=function(){return this},t.pjax=M,t.pjax.enable=G,t.pjax.disable=t.noop,t.pjax.click=t.noop,t.pjax.submit=t.noop,t.pjax.reload=function(){window.location.reload()},t(window).off("popstate.pjax",R)}t.event.props&&t.inArray("state",t.event.props)<0?t.event.props.push("state"):"state"in t.Event.prototype||t.event.addProp("state"),t.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),t.support.pjax?G():H()})(jQuery);
//# sourceMappingURL=/s/files/1/0693/3459/7926/t/6/assets/jquery.pjax.js.map?v=1676150765
